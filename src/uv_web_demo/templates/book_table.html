{% extends "base.html" %}

{% block title %}{{ book.title }} - 章节列表{% endblock %}

{% block content %}
    <nav class="navbar">
        <div class="nav-left">
            <a href="/">首页</a>
        </div>
        <div class="nav-right">
            <button onclick="toggleDark()">切换暗黑模式</button>
            {% if session.get('user') %}
                <div class="dropdown">
                    <span class="username">Hi, {{ session['user']['username'] }} ▼</span>
                    <div class="dropdown-content">
                        <a href="/dashboard">Dashboard</a>
                        <a href="/logout">Logout</a>
                    </div>
                </div>
            {% else %}
                <a href="/login">Sign in</a>
                <a href="/register">Sign up</a>
            {% endif %}
        </div>
        <!-- 手机端汉堡按钮 -->
        <div class="hamburger" onclick="document.body.classList.toggle('nav-open')">
            ☰
        </div>
    </nav>

    <h1>{{ book.title }}</h1>

    {% if book.author %}
        <p>作者：{{ book.author }}</p>
    {% endif %}

    {% if book.description %}
        <p>简介：{{ book.description }}</p>
    {% endif %}

    <h2>章节列表</h2>
    <ul class="chapter-list">
        {% for chapter in book_chapters %}
            <li>
                <a href="{{ url_for('book.book_chapter', chapter_id=chapter.id) }}">
                    {% if chapter.chapter and chapter.chapter_title %}
                        第 {{ chapter.chapter }} 章：{{ chapter.chapter_title }}
                    {% elif chapter.chapter %}
                        第 {{ chapter.chapter }} 章
                    {% elif chapter.chapter_title %}
                        {{ chapter.chapter_title }}
                    {% endif %}
                </a>
            </li>
        {% else %}
            <li>暂无章节</li>
        {% endfor %}
    </ul>
{% endblock %}
